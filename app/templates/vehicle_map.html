{% extends "layout.html" %}
{% block body %}
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Mapas</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/@deck.gl/jupyter-widget@^8.0.0/dist/index.js"></script>
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('show_entries') }}">Grafica de operación</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="{{ url_for('show_vehicle_map') }}" >Mapas</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('show_indicators') }}">Indicadores</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('show_tables') }}" >Tablas</a>
      </li>
    </ul>

    <div class="row">
      <div class="col-3">
        <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
          <a class="nav-link" id="v-pills-home-tab"  href="{{ url_for('show_stations_map') }}" >Estaciones</a>
          <a class="nav-link active" id="v-pills-profile-tab"  href="{{ url_for('show_vehicle_map') }}" >Vehículos</a>
          <a class="nav-link" href="{{ url_for('show_zones_map') }}" >Zonas</a>
        </div>
      </div>
    </div>
    <form action="{{ url_for('map_var') }}" method=post>
        <select name = variable>
            <option value="soc"> {{session.title_var}}</option>
            <option value="altitude">Altitud</option>
            <option value="powerKw">Potencia</option>
            <option value="soc">SOC</option>
            <option value="soh">SOH</option>
            <option value="batt_temp">Temperatura de batería</option>
            <option value="ext_temp">Temperatura externa</option>
            <option value="voltage">Voltage</option>
            <option value="batt_current">Corriente</option>
            <option value="engine_acceleration">Aceleración motor</option>
            <option value="throttle">% de aceleración</option>
            <option value="regenbrake">Freno regenerativo</option>
            <option value="consumption">Consumo</option>
            <option value="range_est">Rango estimado</option>
            <option value="range_ideal">Rango ideal</option>
            <option value="drivetime">Tiempo de manejo</option>
            <option value="footbrake">Freno de pedal</option>
            <option value="engine_temp">Temperatura de motor</option>
            <option value="is_charging">Está cargando</option>
        </select>

        <select name = Vehiculo>
            <option value="Seleccione vehiculo">{{session.map_car}}</option>
            <option value="Renault Twizy">Renault Twizy</option>
            <option value="Nissan Leaf">Nissan Leaf</option>
            <option value="Kia SOUL">Kia SOUL</option>
            <option value="BYD">BYD</option>
        </select>
        <dd><input type=submit value = Monitorear >
    </form>

    <a class="btn btn-primary" href="#" role="button">Estaciones</a>
    <button class="btn btn-primary" type="submit">Vehiculos</button>
    <input class="btn btn-primary" type="button" value="Input">

    <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      overflow-y: scroll;
    }
    
    #deck-map-container {
      width: 96%;
      height: 90%;
      background-color: black;
    }
    
    #map {
      pointer-events: none;
      height: 96%;
      width: 90%;
      position: absolute;
      z-index: 1;
    }
    
    #deckgl-overlay {
      z-index: 2;
    }
    
    #deck-map-wrapper {
      width: 96%;
      height: 90%;
    }
    
    #deck-container {
      width: 96vw;
      height: 90vh;
    }
    </style>
  </head>
  <body>
    <div id="deck-container">
    </div>
  </body>
  <script>
    const jsonInput = {"initialViewState": {"bearing": -27.36, "latitude": 6.25184, "longitude": -75.56359, "maxZoom": 15, "minZoom": 5, "pitch": 40.5, "zoom": 6}, "layers": [{"@@type": "ScatterplotLayer", "data":{{session.json_stations}}, "filled": true, "getFillColor": [255, 140, 0], "getLineColor": [0, 0, 0], "getPosition": "@@=[longitude, latitude]", "id": "2695882c-7d5e-4f89-9e8a-049b84822d70", "lineWidthMinPixels": 1, "opacity": 0.8, "pickable": true, "radiusMaxPixels": 8, "radiusMinPixels": 8, "radiusScale": 6, "stroked": true}], "mapStyle": "mapbox://styles/mapbox/dark-v9", "views": [{"@@type": "MapView", "controller": true}]};
    const MAPBOX_API_KEY = 'pk.eyJ1Ijoic2VjaGF2YTQiLCJhIjoiY2s2dTF0eHQ0MDViaTNmbXRhaHVoaG85cSJ9.xMh2vZNuj2PfxsUksteApQ';
    const tooltip = {'text': '{name}\n{charger_types}'};
  
    const deck = createDeck({
      mapboxApiKey: MAPBOX_API_KEY, 
      container: document.getElementById('deck-container'),
      jsonInput,
      tooltip
    });
  </script>
  <div class="container">
  hh
</div>
</html>

{% endblock %}